!function(n){"use strict";var u,e="data-tt-id",f="data-tt-parent-id",i={},r=undefined,o=function(t,i){for(var u=t.$body.find("tr").not("[data-tt-parent-id]"),r=0;r<u.length;r++)if(r===i)return n(u[r]).attr("data-tt-id");return undefined},s=function(t,i){var r={};return n.each(i,function(i,u){if(!u.IsParent)for(var f in u)isNaN(parseFloat(u[f]))||t.columns[n.fn.bootstrapTable.utils.getFieldIndex(t.columns,f)].groupBySumGroup&&(r[f]===undefined&&(r[f]=0),r[f]+=+u[f])}),r},h=function(n,t){return u.apply([n,t]),i[e.toString()]=t,n.IsParent?(r=t,delete i[f.toString()]):i[f.toString()]=r===undefined?t:r,i},w=function(){Object.keys=function(n){if(n!==Object(n))throw new TypeError("Object.keys called on a non-object");var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t}},c=function(n,t){for(var r=[],i=0;i<n.options.groupByField.length;i++)r.push(t[n.options.groupByField[i]]);return r},l=function(n,t,i){for(var u={},r=0;r<n.options.groupByField.length;r++)u[n.options.groupByField[r].toString()]=t[i][0][n.options.groupByField[r]];return u.IsParent=!0,u},a=function(t,i){var r={};return n.each(t,function(n,t){var u=JSON.stringify(i(t));r[u]=r[u]||[];r[u].push(t)}),Object.keys(r).map(function(n){return r[n]})},v=function(t,i){for(var r=[],e={},u=a(i,function(n){return c(t,n)}),f=0;f<u.length;f++)u[f].unshift(l(t,u,f)),t.options.groupBySumGroup&&(e=s(t,u[f]),n.isEmptyObject(e)||u[f].push(e));return r=r.concat.apply(r,u),!t.options.loaded&&r.length>0&&(t.options.loaded=!0,t.options.originalData=t.options.data,t.options.data=r),r};n.extend(n.fn.bootstrapTable.defaults,{groupBy:!1,groupByField:[],groupBySumGroup:!1,groupByInitExpanded:undefined,loaded:!1,originalData:undefined});n.fn.bootstrapTable.methods.push("collapseAll","expandAll","refreshGroupByField");n.extend(n.fn.bootstrapTable.COLUMN_DEFAULTS,{groupBySumGroup:!1});var t=n.fn.bootstrapTable.Constructor,y=t.prototype.init,p=t.prototype.initData;t.prototype.init=function(){if(!this.options.sortName&&this.options.groupBy&&this.options.groupByField.length>0){var t=this;Object.keys||n.fn.bootstrapTable.utils.objectKeys();this.options.loaded=!1;this.options.originalData=undefined;u=this.options.rowAttributes;this.options.rowAttributes=h;this.$el.on("post-body.bs.table",function(){t.$el.treetable({expandable:!0,onNodeExpand:function(){t.options.height&&t.resetHeader()},onNodeCollapse:function(){t.options.height&&t.resetHeader()}},!0);t.options.groupByInitExpanded!==undefined&&(typeof t.options.groupByInitExpanded=="number"?t.expandNode(t.options.groupByInitExpanded):t.options.groupByInitExpanded.toLowerCase()==="all"&&t.expandAll())})}y.apply(this,Array.prototype.slice.apply(arguments))};t.prototype.initData=function(n,t){this.options.sortName||this.options.groupBy&&this.options.groupByField.length>0&&(this.options.groupByField=typeof this.options.groupByField=="string"?this.options.groupByField.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.groupByField,n=v(this,n?n:this.options.data));p.apply(this,[n,t])};t.prototype.expandAll=function(){this.$el.treetable("expandAll")};t.prototype.collapseAll=function(){this.$el.treetable("collapseAll")};t.prototype.expandNode=function(n){n=o(this,n);n!==undefined&&this.$el.treetable("expandNode",n)};t.prototype.refreshGroupByField=function(t){n.fn.bootstrapTable.utils.compareObjects(this.options.groupByField,t)||(this.options.groupByField=t,this.load(this.options.originalData))}}(jQuery)
//# sourceMappingURL=bootstrap-table-group-by.min.js.map
