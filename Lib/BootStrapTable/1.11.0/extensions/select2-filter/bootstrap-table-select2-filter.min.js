!function(n){"use strict";function i(n){var t=n.$header;return n.options.height&&(t=n.$tableHeader),t}function f(n){return i(n).find("[data-filter-field]")}function r(t){var i=f(t);n.isEmptyObject(t.filterColumnsPartial)||i.each(function(i,r){var u=n(r),e=u.attr("data-filter-field"),f=t.filterColumnsPartial[e];u.is("select")?u.val(f).trigger("change"):u.val(f)})}function u(t,i){var s=!1,u,r,f=0,e,o;if(n.each(t.columns,function(t,f){if(u="hidden",r=[],f.visible){if(f.filter){var e=f.filter.class?" "+f.filter.class:"";r.push('<div style="margin: 0px 2px 2px 2px;" class="filter'+e+'">');f.searchable&&(s=!0,u="visible");switch(f.filter.type.toLowerCase()){case"input":r.push('<input type="text" data-filter-field="'+f.field+'" style="width: 100%; visibility:'+u+'">');break;case"select":r.push('<select data-filter-field="'+f.field+'" style="width: 100%; visibility:'+u+'"><\/select>')}}else r.push('<div class="no-filter"><\/div>');n.each(i.children().children(),function(t,i){return i=n(i),i.data("field")===f.field?(i.find(".fht-cell").append(r.join("")),!1):void 0})}}),s){if(e=i.find("input"),o=i.find("select"),e.length>0){e.off("keyup").on("keyup",function(n){clearTimeout(f);f=setTimeout(function(){t.onColumnSearch(n)},t.options.searchTimeOut)});e.off("mouseup").on("mouseup",function(i){var r=n(this),u=r.val();u!==""&&setTimeout(function(){var n=r.val();n===""&&(clearTimeout(f),f=setTimeout(function(){t.onColumnSearch(i)},t.options.searchTimeOut))},1)})}if(o.length>0)o.on("select2:select",function(n){t.onColumnSearch(n)})}else i.find(".filter").hide()}function e(t){var r=i(t);n.each(t.columns,function(n,i){var u,f;if(i.filter&&i.filter.type==="select"&&(u=r.find("select[data-filter-field="+i.field+"]"),u.length>0&&!u.data().select2)){i.filter.data.unshift("");f={placeholder:"",allowClear:!0,data:i.filter.data,dropdownParent:t.$el.closest(".bootstrap-table")};u.select2(f);u.on("select2:unselecting",function(n){n.preventDefault();u.val(null).trigger("change");t.searchText=undefined;t.onColumnSearch(n)})}})}n.extend(n.fn.bootstrapTable.defaults,{filter:!1,filterValues:{}});n.extend(n.fn.bootstrapTable.COLUMN_DEFAULTS,{filter:undefined});var t=n.fn.bootstrapTable.Constructor,o=t.prototype.init,s=t.prototype.initHeader,h=t.prototype.initSearch;t.prototype.init=function(){if(this.options.filter){var t=this;n.isEmptyObject(t.options.filterValues)||(t.filterColumnsPartial=t.options.filterValues,t.options.filterValues={});this.$el.on("reset-view.bs.table",function(){t.options.height&&(t.$tableHeader.find("select").length>0||t.$tableHeader.find("input").length>0||u(t,t.$tableHeader))}).on("post-header.bs.table",function(){var n=0;e(t);clearTimeout(n);n=setTimeout(function(){r(t)},t.options.searchTimeOut-1e3)}).on("column-switch.bs.table",function(){r(t)})}o.apply(this,Array.prototype.slice.apply(arguments))};t.prototype.initHeader=function(){s.apply(this,Array.prototype.slice.apply(arguments));this.options.filter&&u(this,this.$header)};t.prototype.initSearch=function(){h.apply(this,Array.prototype.slice.apply(arguments));var t=this,i=t.filterColumnsPartial;t.options.sidePagination==="client"&&(this.data=n.grep(this.data,function(r,u){for(var e in i){var s=t.columns[n.fn.bootstrapTable.utils.getFieldIndex(t.columns,e)],o=i[e].toLowerCase(),f=r[e];if(f=n.fn.bootstrapTable.utils.calculateObjectValue(t.header,t.header.formatters[n.inArray(e,t.header.fields)],[f,r,u],f),s.filterStrictSearch){if(!(n.inArray(e,t.header.fields)!==-1&&(typeof f=="string"||typeof f=="number")&&f.toString().toLowerCase()===o.toString().toLowerCase()))return!1}else if(!(n.inArray(e,t.header.fields)!==-1&&(typeof f=="string"||typeof f=="number")&&(f+"").toLowerCase().indexOf(o)!==-1))return!1}return!0}))};t.prototype.onColumnSearch=function(t){var i=n(t.currentTarget).attr("data-filter-field"),r=n.trim(n(t.currentTarget).val());n.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={});r?this.filterColumnsPartial[i]=r:delete this.filterColumnsPartial[i];this.options.pageNumber=1;this.onSearch(t)};t.prototype.setFilterData=function(t,r){var u=this,e=i(u),f=e.find('select[data-filter-field="'+t+'"]');r.unshift("");f.empty();f.select2({data:r,placeholder:"",allowClear:!0,dropdownParent:u.$el.closest(".bootstrap-table")});n.each(this.columns,function(n,i){if(i.field===t)return i.filter.data=r,!1})};t.prototype.setFilterValues=function(n){this.filterColumnsPartial=n};n.fn.bootstrapTable.methods.push("setFilterData");n.fn.bootstrapTable.methods.push("setFilterValues")}(jQuery)
//# sourceMappingURL=bootstrap-table-select2-filter.min.js.map
