(function(n,t,i,r){"use strict";var e="treeview",f={},u,o;f.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:r,backColor:r,borderColor:r,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:r,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:r,onNodeCollapsed:r,onNodeDisabled:r,onNodeEnabled:r,onNodeExpanded:r,onNodeSelected:r,onNodeUnchecked:r,onNodeUnselected:r,onSearchComplete:r,onSearchCleared:r};f.options={silent:!1,ignoreChildren:!1};f.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};u=function(t,i){return this.$element=n(t),this.elementId=t.id,this.styleId=this.elementId+"-style",this.init(i),{options:this.options,init:n.proxy(this.init,this),remove:n.proxy(this.remove,this),getNode:n.proxy(this.getNode,this),getParent:n.proxy(this.getParent,this),getSiblings:n.proxy(this.getSiblings,this),getSelected:n.proxy(this.getSelected,this),getUnselected:n.proxy(this.getUnselected,this),getExpanded:n.proxy(this.getExpanded,this),getCollapsed:n.proxy(this.getCollapsed,this),getChecked:n.proxy(this.getChecked,this),getUnchecked:n.proxy(this.getUnchecked,this),getDisabled:n.proxy(this.getDisabled,this),getEnabled:n.proxy(this.getEnabled,this),selectNode:n.proxy(this.selectNode,this),unselectNode:n.proxy(this.unselectNode,this),toggleNodeSelected:n.proxy(this.toggleNodeSelected,this),collapseAll:n.proxy(this.collapseAll,this),collapseNode:n.proxy(this.collapseNode,this),expandAll:n.proxy(this.expandAll,this),expandNode:n.proxy(this.expandNode,this),toggleNodeExpanded:n.proxy(this.toggleNodeExpanded,this),revealNode:n.proxy(this.revealNode,this),checkAll:n.proxy(this.checkAll,this),checkNode:n.proxy(this.checkNode,this),uncheckAll:n.proxy(this.uncheckAll,this),uncheckNode:n.proxy(this.uncheckNode,this),toggleNodeChecked:n.proxy(this.toggleNodeChecked,this),disableAll:n.proxy(this.disableAll,this),disableNode:n.proxy(this.disableNode,this),enableAll:n.proxy(this.enableAll,this),enableNode:n.proxy(this.enableNode,this),toggleNodeDisabled:n.proxy(this.toggleNodeDisabled,this),search:n.proxy(this.search,this),clearSearch:n.proxy(this.clearSearch,this)}};u.prototype.init=function(t){this.tree=[];this.nodes=[];t.data&&(typeof t.data=="string"&&(t.data=n.parseJSON(t.data)),this.tree=n.extend(!0,[],t.data),delete t.data);this.options=n.extend({},f.settings,t);this.destroy();this.subscribeEvents();this.setInitialStates({nodes:this.tree},0);this.render()};u.prototype.remove=function(){this.destroy();n.removeData(this,e);n("#"+this.styleId).remove()};u.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)};u.prototype.unsubscribeEvents=function(){this.$element.off("click");this.$element.off("nodeChecked");this.$element.off("nodeCollapsed");this.$element.off("nodeDisabled");this.$element.off("nodeEnabled");this.$element.off("nodeExpanded");this.$element.off("nodeSelected");this.$element.off("nodeUnchecked");this.$element.off("nodeUnselected");this.$element.off("searchComplete");this.$element.off("searchCleared")};u.prototype.subscribeEvents=function(){this.unsubscribeEvents();this.$element.on("click",n.proxy(this.clickHandler,this));if(typeof this.options.onNodeChecked=="function")this.$element.on("nodeChecked",this.options.onNodeChecked);if(typeof this.options.onNodeCollapsed=="function")this.$element.on("nodeCollapsed",this.options.onNodeCollapsed);if(typeof this.options.onNodeDisabled=="function")this.$element.on("nodeDisabled",this.options.onNodeDisabled);if(typeof this.options.onNodeEnabled=="function")this.$element.on("nodeEnabled",this.options.onNodeEnabled);if(typeof this.options.onNodeExpanded=="function")this.$element.on("nodeExpanded",this.options.onNodeExpanded);if(typeof this.options.onNodeSelected=="function")this.$element.on("nodeSelected",this.options.onNodeSelected);if(typeof this.options.onNodeUnchecked=="function")this.$element.on("nodeUnchecked",this.options.onNodeUnchecked);if(typeof this.options.onNodeUnselected=="function")this.$element.on("nodeUnselected",this.options.onNodeUnselected);if(typeof this.options.onSearchComplete=="function")this.$element.on("searchComplete",this.options.onSearchComplete);if(typeof this.options.onSearchCleared=="function")this.$element.on("searchCleared",this.options.onSearchCleared)};u.prototype.setInitialStates=function(t,i){if(t.nodes){i+=1;var u=t,r=this;n.each(t.nodes,function(n,t){t.nodeId=r.nodes.length;t.parentId=u.nodeId;t.hasOwnProperty("selectable")||(t.selectable=!0);t.state=t.state||{};t.state.hasOwnProperty("checked")||(t.state.checked=!1);t.state.hasOwnProperty("disabled")||(t.state.disabled=!1);t.state.hasOwnProperty("expanded")||(t.state.expanded=!t.state.disabled&&i<r.options.levels&&t.nodes&&t.nodes.length>0?!0:!1);t.state.hasOwnProperty("selected")||(t.state.selected=!1);r.nodes.push(t);t.nodes&&r.setInitialStates(t,i)})}};u.prototype.clickHandler=function(t){var r,i,u;(this.options.enableLinks||t.preventDefault(),r=n(t.target),i=this.findNode(r),i&&!i.state.disabled)&&(u=r.attr("class")?r.attr("class").split(" "):[],u.indexOf("expand-icon")!==-1?(this.toggleExpandedState(i,f.options),this.render()):u.indexOf("check-icon")!==-1?(this.toggleCheckedState(i,f.options),this.render()):(i.selectable?this.toggleSelectedState(i,f.options):this.toggleExpandedState(i,f.options),this.render()))};u.prototype.findNode=function(n){var i=n.closest("li.list-group-item").attr("data-nodeid"),t=this.nodes[i];return t||console.log("Error: node does not exist"),t};u.prototype.toggleExpandedState=function(n,t){n&&this.setExpandedState(n,!n.state.expanded,t)};u.prototype.setExpandedState=function(t,i,r){i!==t.state.expanded&&(i&&t.nodes?(t.state.expanded=!0,r.silent||this.$element.trigger("nodeExpanded",n.extend(!0,{},t))):i||(t.state.expanded=!1,r.silent||this.$element.trigger("nodeCollapsed",n.extend(!0,{},t)),t.nodes&&!r.ignoreChildren&&n.each(t.nodes,n.proxy(function(n,t){this.setExpandedState(t,!1,r)},this))))};u.prototype.toggleSelectedState=function(n,t){n&&this.setSelectedState(n,!n.state.selected,t)};u.prototype.setSelectedState=function(t,i,r){i!==t.state.selected&&(i?(this.options.multiSelect||n.each(this.findNodes("true","g","state.selected"),n.proxy(function(n,t){this.setSelectedState(t,!1,r)},this)),t.state.selected=!0,r.silent||this.$element.trigger("nodeSelected",n.extend(!0,{},t))):(t.state.selected=!1,r.silent||this.$element.trigger("nodeUnselected",n.extend(!0,{},t))))};u.prototype.toggleCheckedState=function(n,t){n&&this.setCheckedState(n,!n.state.checked,t)};u.prototype.setCheckedState=function(t,i,r){i!==t.state.checked&&(i?(t.state.checked=!0,r.silent||this.$element.trigger("nodeChecked",n.extend(!0,{},t))):(t.state.checked=!1,r.silent||this.$element.trigger("nodeUnchecked",n.extend(!0,{},t))))};u.prototype.setDisabledState=function(t,i,r){i!==t.state.disabled&&(i?(t.state.disabled=!0,this.setExpandedState(t,!1,r),this.setSelectedState(t,!1,r),this.setCheckedState(t,!1,r),r.silent||this.$element.trigger("nodeDisabled",n.extend(!0,{},t))):(t.state.disabled=!1,r.silent||this.$element.trigger("nodeEnabled",n.extend(!0,{},t))))};u.prototype.render=function(){this.initialized||(this.$element.addClass(e),this.$wrapper=n(this.template.list),this.injectStyle(),this.initialized=!0);this.$element.empty().append(this.$wrapper.empty());this.buildTree(this.tree,0)};u.prototype.buildTree=function(t,i){if(t){i+=1;var r=this;n.each(t,function(t,u){for(var f,e=n(r.template.item).addClass("node-"+r.elementId).addClass(u.state.checked?"node-checked":"").addClass(u.state.disabled?"node-disabled":"").addClass(u.state.selected?"node-selected":"").addClass(u.searchResult?"search-result":"").attr("data-nodeid",u.nodeId).attr("style",r.buildStyleOverride(u)),o=0;o<i-1;o++)e.append(r.template.indent);return f=[],u.nodes?(f.push("expand-icon"),u.state.expanded?f.push(r.options.collapseIcon):f.push(r.options.expandIcon)):f.push(r.options.emptyIcon),e.append(n(r.template.icon).addClass(f.join(" "))),r.options.showIcon&&(f=["node-icon"],f.push(u.icon||r.options.nodeIcon),u.state.selected&&(f.pop(),f.push(u.selectedIcon||r.options.selectedIcon||u.icon||r.options.nodeIcon)),e.append(n(r.template.icon).addClass(f.join(" ")))),r.options.showCheckbox&&(f=["check-icon"],u.state.checked?f.push(r.options.checkedIcon):f.push(r.options.uncheckedIcon),e.append(n(r.template.icon).addClass(f.join(" ")))),r.options.enableLinks?e.append(n(r.template.link).attr("href",u.href).append(u.text)):e.append(u.text),r.options.showTags&&u.tags&&n.each(u.tags,function(t,i){e.append(n(r.template.badge).append(i))}),r.$wrapper.append(e),u.nodes&&u.state.expanded&&!u.state.disabled?r.buildTree(u.nodes,i):void 0})}};u.prototype.buildStyleOverride=function(n){if(n.state.disabled)return"";var t=n.color,i=n.backColor;return this.options.highlightSelected&&n.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(i=this.options.selectedBackColor)),this.options.highlightSearchResults&&n.searchResult&&!n.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(i=this.options.searchResultBackColor)),"color:"+t+";background-color:"+i+";"};u.prototype.injectStyle=function(){this.options.injectStyle&&!i.getElementById(this.styleId)&&n('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" <\/style>").appendTo("head")};u.prototype.buildStyle=function(){var n=".node-"+this.elementId+"{";return this.options.color&&(n+="color:"+this.options.color+";"),this.options.backColor&&(n+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(n+="border:1px solid "+this.options.borderColor+";"):n+="border:none;",n+="}",this.options.onhoverColor&&(n+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+n};u.prototype.template={list:'<ul class="list-group"><\/ul>',item:'<li class="list-group-item"><\/li>',indent:'<span class="indent"><\/span>',icon:'<span class="icon"><\/span>',link:'<a href="#" style="color:inherit;"><\/a>',badge:'<span class="badge"><\/span>'};u.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}";u.prototype.getNode=function(n){return this.nodes[n]};u.prototype.getParent=function(n){var t=this.identifyNode(n);return this.nodes[t.parentId]};u.prototype.getSiblings=function(n){var t=this.identifyNode(n),i=this.getParent(t),r=i?i.nodes:this.tree;return r.filter(function(n){return n.nodeId!==t.nodeId})};u.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")};u.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")};u.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")};u.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")};u.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")};u.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")};u.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")};u.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")};u.prototype.selectNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setSelectedState(n,!0,t)},this));this.render()};u.prototype.unselectNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setSelectedState(n,!1,t)},this));this.render()};u.prototype.toggleNodeSelected=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.toggleSelectedState(n,t)},this));this.render()};u.prototype.collapseAll=function(t){var i=this.findNodes("true","g","state.expanded");this.forEachIdentifier(i,t,n.proxy(function(n,t){this.setExpandedState(n,!1,t)},this));this.render()};u.prototype.collapseNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setExpandedState(n,!1,t)},this));this.render()};u.prototype.expandAll=function(t){if(t=n.extend({},f.options,t),t&&t.levels)this.expandLevels(this.tree,t.levels,t);else{var i=this.findNodes("false","g","state.expanded");this.forEachIdentifier(i,t,n.proxy(function(n,t){this.setExpandedState(n,!0,t)},this))}this.render()};u.prototype.expandNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setExpandedState(n,!0,t);n.nodes&&t&&t.levels&&this.expandLevels(n.nodes,t.levels-1,t)},this));this.render()};u.prototype.expandLevels=function(t,i,r){r=n.extend({},f.options,r);n.each(t,n.proxy(function(n,t){this.setExpandedState(t,i>0?!0:!1,r);t.nodes&&this.expandLevels(t.nodes,i-1,r)},this))};u.prototype.revealNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){for(var i=this.getParent(n);i;)this.setExpandedState(i,!0,t),i=this.getParent(i)},this));this.render()};u.prototype.toggleNodeExpanded=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.toggleExpandedState(n,t)},this));this.render()};u.prototype.checkAll=function(t){var i=this.findNodes("false","g","state.checked");this.forEachIdentifier(i,t,n.proxy(function(n,t){this.setCheckedState(n,!0,t)},this));this.render()};u.prototype.checkNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setCheckedState(n,!0,t)},this));this.render()};u.prototype.uncheckAll=function(t){var i=this.findNodes("true","g","state.checked");this.forEachIdentifier(i,t,n.proxy(function(n,t){this.setCheckedState(n,!1,t)},this));this.render()};u.prototype.uncheckNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setCheckedState(n,!1,t)},this));this.render()};u.prototype.toggleNodeChecked=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.toggleCheckedState(n,t)},this));this.render()};u.prototype.disableAll=function(t){var i=this.findNodes("false","g","state.disabled");this.forEachIdentifier(i,t,n.proxy(function(n,t){this.setDisabledState(n,!0,t)},this));this.render()};u.prototype.disableNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setDisabledState(n,!0,t)},this));this.render()};u.prototype.enableAll=function(t){var i=this.findNodes("true","g","state.disabled");this.forEachIdentifier(i,t,n.proxy(function(n,t){this.setDisabledState(n,!1,t)},this));this.render()};u.prototype.enableNode=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setDisabledState(n,!1,t)},this));this.render()};u.prototype.toggleNodeDisabled=function(t,i){this.forEachIdentifier(t,i,n.proxy(function(n,t){this.setDisabledState(n,!n.state.disabled,t)},this));this.render()};u.prototype.forEachIdentifier=function(t,i,r){i=n.extend({},f.options,i);t instanceof Array||(t=[t]);n.each(t,n.proxy(function(n,t){r(this.identifyNode(t),i)},this))};u.prototype.identifyNode=function(n){return typeof n=="number"?this.nodes[n]:n};u.prototype.search=function(t,i){var r,u;return i=n.extend({},f.searchOptions,i),this.clearSearch({render:!1}),r=[],t&&t.length>0&&(i.exactMatch&&(t="^"+t+"$"),u="g",i.ignoreCase&&(u+="i"),r=this.findNodes(t,u),n.each(r,function(n,t){t.searchResult=!0})),i.revealResults?this.revealNode(r):this.render(),this.$element.trigger("searchComplete",n.extend(!0,{},r)),r};u.prototype.clearSearch=function(t){t=n.extend({},{render:!0},t);var i=n.each(this.findNodes("true","g","searchResult"),function(n,t){t.searchResult=!1});t.render&&this.render();this.$element.trigger("searchCleared",n.extend(!0,{},i))};u.prototype.findNodes=function(t,i,r){i=i||"g";r=r||"text";var u=this;return n.grep(this.nodes,function(n){var f=u.getNodeValue(n,r);if(typeof f=="string")return f.match(new RegExp(t,i))})};u.prototype.getNodeValue=function(n,t){var i=t.indexOf("."),u,f;return i>0?(u=n[t.substring(0,i)],f=t.substring(i+1,t.length),this.getNodeValue(u,f)):n.hasOwnProperty(t)?n[t].toString():r};o=function(n){t.console&&t.console.error(n)};n.fn[e]=function(t,i){var r;return this.each(function(){var f=n.data(this,e);typeof t=="string"?f?n.isFunction(f[t])&&t.charAt(0)!=="_"?(i instanceof Array||(i=[i]),r=f[t].apply(f,i)):o("No such method : "+t):o("Not initialized, can not call method : "+t):typeof t=="boolean"?r=f:n.data(this,e,new u(this,n.extend(!0,{},t)))}),r||this}})(jQuery,window,document)
//# sourceMappingURL=bootstrap-treeview.min.js.map
