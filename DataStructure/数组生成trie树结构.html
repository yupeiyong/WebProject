<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <meta charset="utf-8" />
</head>
<body>
    <script>
        /*
        将级联数据转为树结构
        使用trie树结构
        */
        var transObjectToTrieTree = function (tableData, keys) {
            var hashTable = {},
                tree = [];
            for (var i = 0; i < tableData.length; i++) {
                var curHashTable = hashTable,
                 arr = tree;
                for (var k = 0; k < keys.length; k++) {
                    var key = keys[k],
                        field = tableData[i][key];
                    if (!curHashTable[field]) {
                        var node = {
                            value: field
                        };
                        var tmpArray = [];
                        if (k < keys.length - 1) {
                            node.children = tmpArray;
                        }
                        curHashTable[field] = { index: arr.push(node) - 1 };
                        if (node.children) {
                            curHashTable = curHashTable[field];
                            arr = tmpArray;
                        }
                    } else {
                        curHashTable = curHashTable[field];
                        arr = arr[curHashTable.index].children;
                    }
                }
            }
            return tree;
        }
        //三级联动城市数据
        var data = [{
            "province": "浙江",
            "city": "杭州",
            "name": "西湖"
        }, {
            "province": "四川",
            "city": "成都",
            "name": "锦里"
        }, {
            "province": "四川",
            "city": "成都",
            "name": "方所"
        }, {
            "province": "四川",
            "city": "阿坝",
            "name": "九寨沟"
        }];

        var keys = ['province', 'city', 'name'];

        console.log(transObjectToTrieTree(data, keys));
    </script>
</body>
</html>
